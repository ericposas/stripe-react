[{"C:\\Users\\EP\\Documents\\stripe-react\\src\\index.js":"1","C:\\Users\\EP\\Documents\\stripe-react\\src\\App.js":"2","C:\\Users\\EP\\Documents\\stripe-react\\src\\reportWebVitals.js":"3","C:\\Users\\EP\\Documents\\stripe-react\\src\\itemsList.js":"4","C:\\Users\\EP\\Documents\\stripe-react\\src\\productsList.js":"5","C:\\Users\\EP\\Documents\\stripe-react\\src\\Success.js":"6","C:\\Users\\EP\\Documents\\stripe-react\\src\\components\\StyledButton.js":"7","C:\\Users\\EP\\Documents\\stripe-react\\src\\components\\ProductBox.js":"8","C:\\Users\\EP\\Documents\\stripe-react\\src\\components\\Checkout.js":"9","C:\\Users\\EP\\Documents\\stripe-react\\src\\hooks\\useFetchedUserData.js":"10","C:\\Users\\EP\\Documents\\stripe-react\\src\\utils\\utils.js":"11","C:\\Users\\EP\\Documents\\stripe-react\\src\\components\\UpdateUserDataForm.js":"12","C:\\Users\\EP\\Documents\\stripe-react\\src\\hooks\\useAuthToken.js":"13","C:\\Users\\EP\\Documents\\stripe-react\\src\\components\\DrawerComponent.js":"14","C:\\Users\\EP\\Documents\\stripe-react\\src\\components\\ActionModal.js":"15","C:\\Users\\EP\\Documents\\stripe-react\\src\\components\\AppHeader.js":"16","C:\\Users\\EP\\Documents\\stripe-react\\src\\components\\ProfileDataPage.js":"17","C:\\Users\\EP\\Documents\\stripe-react\\src\\components\\BugerButton.js":"18","C:\\Users\\EP\\Documents\\stripe-react\\src\\components\\LogoutTimer.js":"19","C:\\Users\\EP\\Documents\\stripe-react\\src\\components\\CreditCardEntry.js":"20","C:\\Users\\EP\\Documents\\stripe-react\\src\\hooks\\useCreateStripeCustomer.js":"21","C:\\Users\\EP\\Documents\\stripe-react\\src\\components\\StripeCardEntryExample.js":"22","C:\\Users\\EP\\Documents\\stripe-react\\src\\components\\ChoosePaymentMethod.js":"23"},{"size":735,"mtime":1611682596830,"results":"24","hashOfConfig":"25"},{"size":4681,"mtime":1612111997531,"results":"26","hashOfConfig":"25"},{"size":362,"mtime":499162500000,"results":"27","hashOfConfig":"25"},{"size":2537,"mtime":1611467539130,"results":"28","hashOfConfig":"25"},{"size":57,"mtime":1611472459384,"results":"29","hashOfConfig":"25"},{"size":4480,"mtime":1611855402264,"results":"30","hashOfConfig":"25"},{"size":696,"mtime":1611984072974,"results":"31","hashOfConfig":"25"},{"size":1632,"mtime":1612084099043,"results":"32","hashOfConfig":"25"},{"size":11366,"mtime":1612128078077,"results":"33","hashOfConfig":"25"},{"size":1206,"mtime":1611983601331,"results":"34","hashOfConfig":"25"},{"size":410,"mtime":1612064592676,"results":"35","hashOfConfig":"25"},{"size":10388,"mtime":1611984072975,"results":"36","hashOfConfig":"25"},{"size":1472,"mtime":1611984245728,"results":"37","hashOfConfig":"25"},{"size":4136,"mtime":1611984072971,"results":"38","hashOfConfig":"25"},{"size":2195,"mtime":1612116718359,"results":"39","hashOfConfig":"25"},{"size":1024,"mtime":1611984072970,"results":"40","hashOfConfig":"25"},{"size":3033,"mtime":1612127682192,"results":"41","hashOfConfig":"25"},{"size":294,"mtime":1611807335603,"results":"42","hashOfConfig":"25"},{"size":2156,"mtime":1611854844319,"results":"43","hashOfConfig":"25"},{"size":2424,"mtime":1611860900891,"results":"44","hashOfConfig":"25"},{"size":2504,"mtime":1611984203856,"results":"45","hashOfConfig":"25"},{"size":15681,"mtime":1612064592670,"results":"46","hashOfConfig":"25"},{"size":3370,"mtime":1612064592665,"results":"47","hashOfConfig":"25"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},"1d30jjv",{"filePath":"51","messages":"52","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"53","usedDeprecatedRules":"50"},{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"58","usedDeprecatedRules":"59"},{"filePath":"60","messages":"61","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"62","usedDeprecatedRules":"59"},{"filePath":"63","messages":"64","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"65","usedDeprecatedRules":"50"},{"filePath":"66","messages":"67","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"68","messages":"69","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"70","usedDeprecatedRules":"71"},{"filePath":"72","messages":"73","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"74","messages":"75","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"76","messages":"77","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"78","messages":"79","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"80","messages":"81","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"82","usedDeprecatedRules":"50"},{"filePath":"83","messages":"84","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"85","usedDeprecatedRules":"50"},{"filePath":"86","messages":"87","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"88","usedDeprecatedRules":"50"},{"filePath":"89","messages":"90","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"91","messages":"92","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"93","messages":"94","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"95","usedDeprecatedRules":"50"},{"filePath":"96","messages":"97","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"98","usedDeprecatedRules":"50"},{"filePath":"99","messages":"100","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"101"},{"filePath":"102","messages":"103","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"104","usedDeprecatedRules":"50"},{"filePath":"105","messages":"106","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"107","usedDeprecatedRules":"50"},{"filePath":"108","messages":"109","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"110","usedDeprecatedRules":"50"},"C:\\Users\\EP\\Documents\\stripe-react\\src\\index.js",[],["111","112"],"C:\\Users\\EP\\Documents\\stripe-react\\src\\App.js",["113"],"import React from 'react'\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Link\r\n} from 'react-router-dom'\r\nimport './App.css'\r\nimport SuccessPage from './Success'\r\nimport { useAuth0 } from '@auth0/auth0-react'\r\nimport Checkout from './components/Checkout'\r\nimport UpdateUserDataForm from './components/UpdateUserDataForm'\r\nimport ChoosePaymentMethod from './components/ChoosePaymentMethod'\r\nimport { DarkenDiv, DrawerLeftPanel } from './components/DrawerComponent'\r\nimport { ActionModal } from './components/ActionModal'\r\nimport AppHeader from './components/AppHeader'\r\nimport ProfileDataPage from './components/ProfileDataPage'\r\nimport BurgerButton from './components/BugerButton'\r\nimport LogoutTimer from './components/LogoutTimer'\r\nimport { Elements } from '@stripe/react-stripe-js'\r\nimport { loadStripe } from '@stripe/stripe-js'\r\nimport StripeCardEntryExample from './components/StripeCardEntryExample'\r\n\r\nconst stripePromise = loadStripe(process.env.REACT_APP_STRIPE_TEST_PUB_KEY)\r\n\r\nfunction App() {\r\n  \r\n  const { user } = useAuth0()\r\n  const [drawerOpen, setDrawerOpen] = React.useState(false)\r\n  const [updatedProfile, setUpdatedProfile] = React.useState(false)\r\n\r\n  return (\r\n    <>\r\n      <div className='App'>\r\n\r\n        <LogoutTimer minutesOfInactivity={15} />\r\n\r\n        <Router>\r\n\r\n          {\r\n            user && <BurgerButton doAction={() => setDrawerOpen(true)} />\r\n          }\r\n\r\n          <Link to='/' style={{ textDecoration: 'none' }}>\r\n            <AppHeader />\r\n          </Link>\r\n\r\n          <DarkenDiv drawerOpen={drawerOpen} setDrawerOpen={setDrawerOpen} />\r\n          <DrawerLeftPanel updatedProfile={updatedProfile} drawerOpen={drawerOpen} setDrawerOpen={setDrawerOpen} />\r\n          \r\n          <ActionModal\r\n          queryTerm={'paymentMethodSetup'}\r\n          msg={'Payment method saved!'}\r\n          redirectPath={'/'}\r\n          timeout={3000}\r\n          delayBeforeLeave={2750}\r\n          doAction={() => {\r\n            setDrawerOpen(false)\r\n          }}\r\n          />\r\n\r\n          <ActionModal\r\n          queryTerm={'profileSetup'}\r\n          msg={'Thank you for completing your profile!'}\r\n          redirectPath={'/'}\r\n          timeout={3000}\r\n          delayBeforeLeave={2750}\r\n          doAction={() => {\r\n            setDrawerOpen(false)\r\n          }}\r\n          />\r\n          \r\n          <ActionModal\r\n          queryTerm={'updateInfo'}\r\n          msg={'You have successfully updated your profile info!'}\r\n          redirectPath={'/'}\r\n          timeout={3000}\r\n          delayBeforeLeave={2750}\r\n          doAction={() => {\r\n            setDrawerOpen(false)\r\n          }}\r\n          />\r\n          \r\n          <ActionModal\r\n          queryTerm={'paymentSucceeded'}\r\n          msg={'Your payment has been processed successfully!'}\r\n          redirectPath={'/'}\r\n          timeout={3000}\r\n          delayBeforeLeave={2750}\r\n          doAction={() => {\r\n            setDrawerOpen(false)\r\n          }}\r\n          />\r\n          \r\n          <ActionModal\r\n          queryTerm={'paymentFailed'}\r\n          msg={'There was an error, your payment method did not process'}\r\n          redirectPath={'/'}\r\n          timeout={3000}\r\n          delayBeforeLeave={2750}\r\n          doAction={() => {\r\n            setDrawerOpen(false)\r\n          }}\r\n          />\r\n\r\n          <div>\r\n            <Switch>\r\n              \r\n              <Route exact path='/'>\r\n                <ProfileDataPage />\r\n              </Route>\r\n              \r\n              <Route path='/success'>\r\n                <SuccessPage />\r\n              </Route>\r\n              \r\n              <Route path='/checkout'>\r\n                <Elements stripe={stripePromise}>\r\n                  <Checkout />\r\n                </Elements>\r\n              </Route>\r\n\r\n              <Route path='/setup-payment-method'>\r\n                <Elements stripe={stripePromise}>\r\n                  <StripeCardEntryExample />\r\n                </Elements>\r\n              </Route>\r\n\r\n              <Route path='/update-profile'>\r\n                <br />\r\n                <div>Update your info</div>\r\n                <br />\r\n                <UpdateUserDataForm\r\n                user={user}\r\n                setUpdatedProfile={setUpdatedProfile}\r\n                extraActionFn={() => {\r\n                  setDrawerOpen(false)\r\n                }}\r\n                onCompleteParams={{\r\n                  queryKey: 'updateInfo',\r\n                  queryValue: 'complete'\r\n                }}\r\n                submitLabel={ 'Update info' }\r\n                />\r\n              </Route>\r\n\r\n            </Switch>\r\n          </div>\r\n\r\n        </Router>\r\n      </div>\r\n    </>\r\n  )\r\n\r\n}\r\n\r\nexport default App","C:\\Users\\EP\\Documents\\stripe-react\\src\\reportWebVitals.js",[],"C:\\Users\\EP\\Documents\\stripe-react\\src\\itemsList.js",["114"],"export default () => ([\r\n    {\r\n        price_data: {\r\n            currency: 'usd',\r\n            product_data: {\r\n                name: 'Gummy Bears'\r\n            },\r\n            unit_amount: 100\r\n        },\r\n        quantity: 1\r\n    },\r\n    {\r\n        price_data: {\r\n            currency: 'usd',\r\n            product_data: {\r\n                name: 'Camisa'\r\n            },\r\n            unit_amount: 2500\r\n        },\r\n        quantity: 1\r\n    },\r\n    {\r\n        price_data: {\r\n            currency: 'usd',\r\n            product_data: {\r\n                name: 'Shirt'\r\n            },\r\n            unit_amount: 2000\r\n        },\r\n        quantity: 1\r\n    },\r\n    {\r\n        price_data: {\r\n            currency: 'usd',\r\n            product_data: {\r\n                name: 'Pants'\r\n            },\r\n            unit_amount: 3500\r\n        },\r\n        quantity: 1\r\n    },\r\n    {\r\n        price_data: {\r\n            currency: 'usd',\r\n            product_data: {\r\n                name: 'Shoes'\r\n            },\r\n            unit_amount: 7500\r\n        },\r\n        quantity: 1\r\n    },\r\n    {\r\n        price_data: {\r\n            currency: 'usd',\r\n            product_data: {\r\n                name: 'Jacket'\r\n            },\r\n            unit_amount: 18500\r\n        },\r\n        quantity: 1\r\n    },\r\n    {\r\n        price_data: {\r\n            currency: 'usd',\r\n            product_data: {\r\n                name: 'Flops'\r\n            },\r\n            unit_amount: 1000\r\n        },\r\n        quantity: 1\r\n    },\r\n    {\r\n        price_data: {\r\n            currency: 'usd',\r\n            product_data: {\r\n                name: 'Hat'\r\n            },\r\n            unit_amount: 1500\r\n        },\r\n        quantity: 1\r\n    },\r\n    {\r\n        price_data: {\r\n            currency: 'usd',\r\n            product_data: {\r\n                name: 'Suit'\r\n            },\r\n            unit_amount: 25500\r\n        },\r\n        quantity: 1\r\n    },\r\n    {\r\n        price_data: {\r\n            currency: 'usd',\r\n            product_data: {\r\n                name: 'Tie'\r\n            },\r\n            unit_amount: 4000\r\n        },\r\n        quantity: 1\r\n    },\r\n    {\r\n        price_data: {\r\n            currency: 'usd',\r\n            product_data: {\r\n                name: 'Dress Shoes'\r\n            },\r\n            unit_amount: 12000\r\n        },\r\n        quantity: 1\r\n    },\r\n    {\r\n        price_data: {\r\n            currency: 'usd',\r\n            product_data: {\r\n                name: 'Nikes'\r\n            },\r\n            unit_amount: 35500\r\n        },\r\n        quantity: 1\r\n    },\r\n])\r\n",["115","116"],"C:\\Users\\EP\\Documents\\stripe-react\\src\\productsList.js",["117"],"export default () => ([\r\n    'prod_IofQI7lk3rL1Qq',\r\n])\r\n","C:\\Users\\EP\\Documents\\stripe-react\\src\\Success.js",["118","119"],"import React from 'react'\r\nimport { useLocation, useHistory } from 'react-router-dom'\r\nimport { useAuth0 } from '@auth0/auth0-react'\r\nimport UpdateUserDataForm from './components/UpdateUserDataForm'\r\nimport useAuthToken from './hooks/useAuthToken'\r\nimport useFetchedUserData from './hooks/useFetchedUserData'\r\n\r\nfunction usePatchStripeSessionData (stripeSession) {\r\n\r\n    const [res, setRes] = React.useState(null)\r\n    const jwt = useAuthToken()\r\n    const user = useFetchedUserData()\r\n\r\n    React.useEffect(() => {\r\n\r\n        if (user && jwt && stripeSession) {\r\n            let status, statusCode\r\n            let subscriptions =\r\n                user.user_metadata?.subscriptions ? user.user_metadata.subscriptions.push(stripeSession.subscription)\r\n                : [ stripeSession.subscription ]\r\n            fetch(`https://gymwebapp.us.auth0.com/api/v2/users/${user.user_id}`, {\r\n                method: 'PATCH',\r\n                body: JSON.stringify({\r\n                    user_metadata: {\r\n                        stripe: {\r\n                            customer: user.user_metadata?.customer ? user.user_metadata.customer : stripeSession.customer,\r\n                            subscriptions: subscriptions !== user.user_metadata.subscriptions ? subscriptions : user.user_metadata.subscriptions\r\n                        }\r\n                    }\r\n                }),\r\n                headers: {\r\n                    'content-type': 'application/json',\r\n                    'authorization': `Bearer ${jwt.access_token}`\r\n                }\r\n            })\r\n            .then(response => {\r\n                status = response.status\r\n                return response.json()\r\n            })\r\n            .then(data => {\r\n                console.log(data)\r\n                setRes(data)\r\n                statusCode = data.statusCode ? data.statusCode : null\r\n                // setTimeout(() => {\r\n                //     history.push(`/?${queryKey}=${queryValue}`)\r\n                // }, 250)\r\n            })\r\n            .catch(err => {\r\n                console.log(err)\r\n                if (status === 401  || statusCode === 401) {\r\n                    if (localStorage.getItem('gym-app-jwt')) {\r\n                        localStorage.removeItem('gym-app-jwt')\r\n                    }\r\n                }\r\n            })\r\n        }\r\n\r\n    }, [user, jwt, stripeSession])\r\n\r\n    return res\r\n\r\n}\r\n\r\nexport default function SuccessPage () {\r\n\r\n    const location = useLocation()\r\n    const history = useHistory()\r\n    const { isLoading, isAuthenticated, user } = useAuth0()\r\n    const [stripeSession, setStripeSession] = React.useState(null)\r\n    usePatchStripeSessionData(stripeSession)\r\n\r\n    React.useEffect(() => {\r\n        console.log(\r\n            stripeSession\r\n        )\r\n    }, [stripeSession])\r\n\r\n    React.useEffect(() => {\r\n        // get session data to populate form fields\r\n        let session_id\r\n        if (location.search) {\r\n            session_id = location.search.split('=')[1]\r\n        }\r\n        if (session_id) {\r\n            if (isAuthenticated === true) {\r\n                // get stripe customer data \r\n                let data = fetch('/get-checkout-session', {\r\n                    method: 'POST',\r\n                    body: JSON.stringify({ session_id }),\r\n                        headers: { 'Content-type': 'application/json' }\r\n                })\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    let { session } = data\r\n                    setStripeSession(session)\r\n                })\r\n                .catch(err => console.log(err))\r\n            }\r\n        } else {\r\n            // redirect to home\r\n            history.push('/')\r\n        }\r\n\r\n    }, [ isAuthenticated ])\r\n\r\n    const markup = () => (\r\n        <>\r\n            <br />\r\n            <div>\r\n                Payment was successful! Please finish setting up your profile\r\n            </div>\r\n            <br />\r\n            <UpdateUserDataForm\r\n            user={user}\r\n            onCompleteParams={{\r\n                queryKey: 'profileSetup',\r\n                queryValue: 'complete',\r\n            }}\r\n            submitLabel={ 'Complete Enrollment' }\r\n            />\r\n        </>\r\n    )\r\n\r\n    return (\r\n        <>\r\n        {\r\n            isLoading\r\n            ? <><br /><div>Loading...</div></>\r\n            :\r\n                isAuthenticated\r\n                ? markup()\r\n                : null\r\n        }\r\n        </>\r\n    )\r\n}\r\n","C:\\Users\\EP\\Documents\\stripe-react\\src\\components\\StyledButton.js",[],"C:\\Users\\EP\\Documents\\stripe-react\\src\\components\\ProductBox.js",["120","121"],"import React from 'react'\r\nimport styled from 'styled-components'\r\n\r\nconst StyledProductBoxDiv = styled.div`\r\nuser-select: none;\r\nalign-items: center;\r\nbox-shadow: 1px 1px 2px 2px rgba(0, 0, 0, 0.15);\r\nborder-radius: 3px;\r\npadding: 20px;\r\nwidth: 300px;\r\nposition: relative;\r\nmargin: auto;\r\nleft: 0;\r\nright: 0;\r\ntransform: scale(1.00);\r\ntransition: all .35s;\r\ncursor: pointer;\r\n&:hover {\r\n    transform: scale(1.025);\r\n    transition: all .35s;\r\n}\r\n`\r\n\r\nexport const convertToDollar = priceNum => {\r\n    let amt = priceNum.toString()\r\n    let dollarAmt = amt.split('')\r\n    dollarAmt.pop()\r\n    dollarAmt.pop()\r\n    dollarAmt.push('.00')\r\n    dollarAmt = dollarAmt.join('')\r\n    return dollarAmt\r\n}\r\n\r\nexport default ({ product, itemsChecked, updateCart }) => (\r\n    <>\r\n        <StyledProductBoxDiv\r\n        onClick={() => { updateCart(product) }}\r\n        >\r\n            <span>\r\n                <div key={product.id}>\r\n                { product.name }\r\n                </div>\r\n                <div>\r\n                { product.statement_descriptor }\r\n                </div>\r\n                <div>\r\n                ${ convertToDollar( product.metadata.price ) }\r\n                </div>\r\n                <input\r\n                style={{ position: 'absolute', right: '10px', bottom: '10px' }}\r\n                type='checkbox'\r\n                checked={itemsChecked[product.id]}\r\n                onChange={() => { updateCart(product) }}\r\n                />\r\n            </span>\r\n            <img\r\n            style={{ 'width': '100px' }}\r\n            src={ product.images[0] }\r\n            />\r\n        </StyledProductBoxDiv>\r\n    </>\r\n)",["122","123"],"C:\\Users\\EP\\Documents\\stripe-react\\src\\components\\Checkout.js",["124","125","126","127","128"],"C:\\Users\\EP\\Documents\\stripe-react\\src\\hooks\\useFetchedUserData.js",[],"C:\\Users\\EP\\Documents\\stripe-react\\src\\utils\\utils.js",[],"C:\\Users\\EP\\Documents\\stripe-react\\src\\components\\UpdateUserDataForm.js",[],"C:\\Users\\EP\\Documents\\stripe-react\\src\\hooks\\useAuthToken.js",["129"],"import React from 'react'\r\nimport { useAuth0 } from '@auth0/auth0-react'\r\n\r\nexport default function useAuthToken () {\r\n\r\n    const [jwt, setJwt] = React.useState(null)\r\n    const { isAuthenticated } = useAuth0()\r\n\r\n    React.useEffect(() => {\r\n        console.log(\r\n        'user auth: ', isAuthenticated\r\n        )\r\n        if (isAuthenticated === true) {\r\n            if (window.localStorage && !localStorage.getItem('gym-app-jwt')) {\r\n                fetch('/retrieve-api-token', {\r\n                    method: 'POST',\r\n                    headers: { 'Content-type': 'application/json' }\r\n                })\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    console.log(data)\r\n                    setJwt(data)\r\n                    localStorage.setItem('gym-app-jwt', JSON.stringify(data))\r\n                    // we will update this to send the jwt to our mongo db for better security...\r\n                    // we will then need to blacklist or invalidate old jwt tokens as well\r\n                    // but for now, let's make a request using the jwt! (at Success component)\r\n                    // request will be PATCH to update user \r\n                })\r\n                .catch(err => console.log(err))\r\n            } else {\r\n                console.log(jwt)\r\n                setJwt(JSON.parse(localStorage.getItem('gym-app-jwt')))\r\n            }\r\n        }\r\n\r\n    }, [isAuthenticated])\r\n\r\n    return jwt\r\n\r\n}","C:\\Users\\EP\\Documents\\stripe-react\\src\\components\\DrawerComponent.js",["130","131"],"import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport useFetchedUserData from '../hooks/useFetchedUserData'\r\n// import useFetchedUserData from '../hooks/useFetchedUserData'\r\nimport StyledButton, { GreyedOutButton } from './StyledButton'\r\n\r\nfunction DrawerLeftPanel ({ updatedProfile, drawerOpen, setDrawerOpen }) {\r\n  \r\n  const fetchedUser = useFetchedUserData()\r\n  // const [fetchedUserUpdated, setFetchedUserUpdated] = React.useState(false)\r\n\r\n  // const shouldRenderEnrollButton = () => {\r\n  //   if (\r\n  //     fetchedUser && fetchedUser.given_name && fetchedUser.family_name &&\r\n  //     (fetchedUser.user_metadata?.mobile ? fetchedUser.user_metadata.mobile : null)\r\n  //     ) {\r\n  //     return true\r\n  //   }\r\n  //   return false\r\n  // }\r\n\r\n  // React.useEffect(() => {\r\n    \r\n  //   setFetchedUserUpdated(\r\n  //     shouldRenderEnrollButton()\r\n  //   )\r\n\r\n  // }, [fetchedUser])\r\n\r\n  return (\r\n    <>\r\n    {\r\n      drawerOpen ?\r\n      <div\r\n        className={'SidePanel_container'}\r\n        style={{\r\n          width: '300px',\r\n          height: '100vh',\r\n          position: 'absolute',\r\n          left: 0, top: 0,\r\n          color: 'white',\r\n          zIndex: 100,\r\n          backgroundColor: 'white',\r\n          boxShadow: '1px 1px 2px 2px rgba(0, 0, 0, 0.2)'\r\n        }}\r\n        >\r\n          <StyledButton\r\n          onClick={() => setDrawerOpen(false)}\r\n          style={{ position: 'absolute', right: '10px', top: '10px', width: '50px', backgroundColor: 'royalblue', border: '1px solid darkblue' }}\r\n          >\r\n            &#8678;\r\n          </StyledButton>\r\n          <h4\r\n          style={{\r\n            margin: 0,\r\n            padding: '25px 0 25px 0',\r\n            backgroundColor: 'royalblue',\r\n          }}\r\n          >\r\n            Account\r\n          </h4>\r\n\r\n          <br />\r\n          <Link to='/'>\r\n            <StyledButton\r\n              onClick={() => setDrawerOpen(false)}\r\n              style={{ backgroundColor: 'royalblue' }}\r\n            >\r\n              Profile Info\r\n            </StyledButton>\r\n          </Link>\r\n          <br />\r\n          \r\n          <br />\r\n          <Link to='/update-profile'>\r\n            <StyledButton\r\n            onClick={() => setDrawerOpen(false)}\r\n            style={{ backgroundColor: 'royalblue' }}\r\n            >\r\n              Update profile info\r\n            </StyledButton>\r\n          </Link>\r\n          <br />\r\n\r\n          <br />\r\n          <Link to='/setup-payment-method'>\r\n            <StyledButton\r\n            onClick={() => setDrawerOpen(false)}\r\n            style={{ backgroundColor: 'royalblue' }}\r\n            >\r\n              Save a Payment Method\r\n            </StyledButton>\r\n          </Link>\r\n          <br />\r\n          \r\n          <br />\r\n          {\r\n            (updatedProfile ||\r\n            fetchedUser && fetchedUser.given_name && fetchedUser.family_name &&\r\n            (fetchedUser.user_metadata?.mobile ? fetchedUser.user_metadata.mobile : null))\r\n            ?\r\n              <Link to='/checkout'>\r\n                <StyledButton\r\n                  onClick={() => setDrawerOpen(false)}\r\n                  style={{ backgroundColor: 'royalblue' }}\r\n                >\r\n                  Enroll in Classes\r\n                </StyledButton>\r\n              </Link>\r\n            :\r\n              <GreyedOutButton\r\n                style={{ backgroundColor: '#ccc' }}\r\n              >\r\n                Enroll in Classes\r\n              </GreyedOutButton>\r\n          }\r\n          <br />\r\n\r\n        </div>\r\n      : null\r\n    }\r\n    </>\r\n  )\r\n}\r\n  \r\nfunction DarkenDiv ({ drawerOpen, setDrawerOpen }) {\r\n    return (\r\n        <>\r\n        {\r\n            drawerOpen ?\r\n            <div\r\n            onClick={() => setDrawerOpen(false)}\r\n            className={'bg-darken'}\r\n            style={{\r\n            top: 0,\r\n            left: 0,\r\n            width: '100vw',\r\n            height: '100vh',\r\n            position: 'absolute',\r\n            backgroundColor: 'rgba(0, 0, 0, 0.25)'\r\n            }}\r\n            ></div>\r\n            : null\r\n        }\r\n        </>\r\n    )\r\n}\r\n\r\nexport {\r\n    DrawerLeftPanel,\r\n    DarkenDiv\r\n}\r\n","C:\\Users\\EP\\Documents\\stripe-react\\src\\components\\ActionModal.js",["132","133"],"import React from 'react'\r\nimport styled, { css } from 'styled-components'\r\nimport { useLocation, useHistory } from 'react-router-dom'\r\n\r\nconst ModalDiv_SlideIn = styled.div`\r\ncolor: white;\r\npositon: absolute;\r\npadding: 10px 25px;\r\nborder-radius: 3px;\r\nbackground-color: ${props => props.error ? 'red' : 'mediumseagreen' };\r\nbox-shadow: 1px 1px 2px 2px rgba(0, 0, 0, 0.2);\r\ntransform: translateX(-100vw);\r\ntransition: transform .5s ease-out;\r\n${props => props.slide === 'in' && css`\r\n  transform: translateX(0px);\r\n`}\r\n${props => props.slide === 'out' && css`\r\n  transform: translateX(200vw);\r\n`}\r\n`\r\n\r\nfunction ActionModal ({ doAction, msg, redirectPath, queryTerm, timeout, delayBeforeLeave }) {\r\n\r\n  const location = useLocation()\r\n  const history = useHistory()\r\n  const [modal, setModal] = React.useState(false)\r\n  const [slide, setSlide] = React.useState(null)\r\n  const [error, setError] = React.useState(false)\r\n\r\n  React.useEffect(() => {\r\n    if (location) {\r\n      let search = location.search.substr(1, location.search.length)\r\n      let params = search.split('=')\r\n      if (params) {\r\n        let key = params[0]\r\n        let value = params[1]\r\n        if (key && value) {\r\n          console.log(key, value)\r\n          if (key === queryTerm) {\r\n            if (value === 'complete' || value === 'error') {\r\n              if (value === 'error') {\r\n                setError(true)\r\n              }\r\n              setModal(true) // maybe replace this with react toast lib\r\n              setTimeout(() => setSlide('in'), 50)\r\n              setTimeout(() => {\r\n                setSlide('out')\r\n              }, delayBeforeLeave)\r\n              setTimeout(() => {\r\n                if (redirectPath) {\r\n                  history.push(redirectPath)\r\n                }\r\n                doAction()\r\n                setModal(false)\r\n              }, timeout)\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }, [location])\r\n  \r\n  return (\r\n    <>\r\n    {\r\n      modal ?\r\n        <>\r\n            <ModalDiv_SlideIn slide={ slide } error={ error }>\r\n              {msg}\r\n            </ModalDiv_SlideIn>\r\n        </>\r\n      :\r\n        <></>\r\n    }\r\n    </>\r\n  )\r\n}\r\n\r\nexport { ActionModal }","C:\\Users\\EP\\Documents\\stripe-react\\src\\components\\AppHeader.js",[],"C:\\Users\\EP\\Documents\\stripe-react\\src\\components\\ProfileDataPage.js",[],"C:\\Users\\EP\\Documents\\stripe-react\\src\\components\\BugerButton.js",["134"],"import React from 'react'\r\nimport StyledButton from './StyledButton'\r\n\r\nexport default ({ doAction }) => (\r\n    <StyledButton\r\n    onClick={doAction}\r\n    style={{ position: 'absolute', left: '14px', top: '7px', width: '50px', fontSize: '24px' }}\r\n    >\r\n      &equiv;\r\n    </StyledButton>\r\n)\r\n","C:\\Users\\EP\\Documents\\stripe-react\\src\\components\\LogoutTimer.js",["135","136"],"import React from 'react'\r\nimport { useAuth0 } from '@auth0/auth0-react'\r\n\r\nexport default function LogoutTimer ({ minutesOfInactivity }) {\r\n\r\n    const { isAuthenticated, logout } = useAuth0()\r\n    const minutes = React.useRef(minutesOfInactivity)\r\n    const seconds = React.useRef(0)\r\n    const timeout = React.useRef(() => setTOut(minutes.current))\r\n    const interval = React.useRef(() => setCountdown(minutes.current))\r\n\r\n    const setTOut = () => {\r\n        // console.log(`logout timeout refreshed, set at ${minutes.current} minute${minutes.current > 1 ? 's' : ''}`)\r\n        return setTimeout(() => {\r\n            console.log(`logging out due to ${minutes.current} of inactivity`)\r\n            // also remove the jwt token from localStorage\r\n            if (localStorage.getItem('gym-app-jwt')) {\r\n                localStorage.removeItem('gym-app-jwt')\r\n            }\r\n            logout({ redirectTo: window.location.origin })\r\n        }, ((1000 * 60) * minutes.current))\r\n    }\r\n\r\n    const setCountdown = () => {\r\n        seconds.current = minutes.current * 60\r\n        return setInterval(() => {\r\n            seconds.current = seconds.current - 1\r\n            let sec = seconds.current % 60\r\n            // console.log(`timer: ${((seconds.current - (seconds.current % 60)) / 60)}:${sec < 10 ? `0${sec}` : sec}`)\r\n        }, 1000)\r\n    }\r\n\r\n    React.useEffect(() => {\r\n\r\n        const mouseMoveHandler = () => {\r\n            if (timeout?.current && interval?.current) {\r\n                clearTimeout(timeout.current)\r\n                clearInterval(interval.current)\r\n            }\r\n            timeout.current = setTOut()\r\n            interval.current = setCountdown()   \r\n        }\r\n\r\n        if (isAuthenticated === true) {\r\n            console.log('authenticated, set a timer to logout automagically, but refresh upon mouse movement')\r\n            window.addEventListener('mousemove', mouseMoveHandler)\r\n            mouseMoveHandler() // fire once to init logout timer\r\n        }\r\n\r\n        return () => {\r\n            window.removeEventListener('mousemove', mouseMoveHandler)\r\n        }\r\n\r\n    }, [isAuthenticated])\r\n\r\n    return <></>\r\n\r\n}","C:\\Users\\EP\\Documents\\stripe-react\\src\\components\\CreditCardEntry.js",[],["137","138"],"C:\\Users\\EP\\Documents\\stripe-react\\src\\hooks\\useCreateStripeCustomer.js",["139"],"import React from 'react'\r\nimport { useAuth0 } from '@auth0/auth0-react'\r\nimport useAuthToken from './useAuthToken'\r\n\r\nexport default function useCreateStripeCustomer () {\r\n  \r\n  const { user } = useAuth0()\r\n  const [stripeCustomer, setStripeCustomer] = React.useState(null)\r\n  const jwt = useAuthToken()\r\n\r\n  React.useEffect(() => {\r\n\r\n    if (stripeCustomer) { // once we have both the stripeCustomer and jwt deps.. do..\r\n      // patch stripe customer through to auth0 user \r\n      \r\n      console.log('stripe customer created')\r\n\r\n      if (jwt) {\r\n        \r\n        let status, statusCode\r\n        fetch(`https://gymwebapp.us.auth0.com/api/v2/users/${user.sub}`, {\r\n            method: 'PATCH',\r\n            body: JSON.stringify({\r\n              user_metadata: {\r\n                stripe: {\r\n                  customer: stripeCustomer\r\n                }\r\n              }\r\n            }),\r\n            headers: {\r\n              'content-type': 'application/json',\r\n              'authorization': `Bearer ${jwt.access_token}`\r\n            }\r\n        })\r\n        .then(response => {\r\n          status = response.status\r\n          return response.json()\r\n        })\r\n        .then(data => {\r\n          console.log(data)\r\n          statusCode = data.statusCode ? data.statusCode : null\r\n        })\r\n        .catch(err => {\r\n            console.log(err)\r\n            if (status === 401 || statusCode === 401) {\r\n              if (localStorage.getItem('gym-app-jwt')) {\r\n                localStorage.removeItem('gym-app-jwt')\r\n              }\r\n            }\r\n        })\r\n      }\r\n\r\n    }\r\n\r\n  }, [stripeCustomer, jwt]) // on stripeCustomer or jwt state change.. do..\r\n\r\n  React.useEffect(() => {\r\n\r\n    if (user) {\r\n      console.log(user)\r\n      console.log(\r\n        user.email\r\n      )\r\n\r\n      console.log('hook should create stripe customer')\r\n\r\n      fetch('/create-stripe-customer', {\r\n        method: 'POST',\r\n        body: JSON.stringify({\r\n          // email: user.email ? user.email : user.name\r\n          email: user.email\r\n        }),\r\n        headers: {\r\n          'Content-type': 'application/json'\r\n        }\r\n      })\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        if (data.value === true) { // if we created a new Stripe customer\r\n          console.log(data)\r\n          let { customer } = data\r\n          setStripeCustomer(customer) // save the stripe api data to auth0 user\r\n        }\r\n      })\r\n      .catch(err => console.log(err))\r\n    }\r\n\r\n  }, [user])\r\n\r\n}","C:\\Users\\EP\\Documents\\stripe-react\\src\\components\\StripeCardEntryExample.js",["140","141","142","143","144","145"],"import React, {useState} from 'react'\r\nimport { CardElement, Elements, useElements, useStripe } from '@stripe/react-stripe-js'\r\nimport './2-Card-Detailed.css'\r\nimport useFetchedUserData from '../hooks/useFetchedUserData'\r\nimport { useAuth0 } from '@auth0/auth0-react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { set } from 'lodash'\r\nimport { gymApiUrl } from '../utils/utils'\r\nimport useAuthToken from '../hooks/useAuthToken'\r\n\r\nconst CARD_OPTIONS = {\r\n  iconStyle: 'solid',\r\n  style: {\r\n    base: {\r\n      iconColor: '#c4f0ff',\r\n      color: '#000',\r\n      fontWeight: 500,\r\n      fontFamily: 'Roboto, Open Sans, Segoe UI, sans-serif',\r\n      fontSize: '16px',\r\n      fontSmoothing: 'antialiased',\r\n      ':-webkit-autofill': {\r\n        color: '#fce883',\r\n      },\r\n      '::placeholder': {\r\n        color: 'rgba(0, 0, 0, 0.25)',\r\n      },\r\n    },\r\n    invalid: {\r\n      iconColor: '#666',\r\n      color: '#666',\r\n    },\r\n  },\r\n}\r\n\r\nconst CardField = ({onChange}) => (\r\n  <div className=\"FormRow\">\r\n    <CardElement options={CARD_OPTIONS} onChange={onChange} />\r\n  </div>\r\n);\r\n\r\nconst Field = ({\r\n  label,\r\n  id,\r\n  type,\r\n  placeholder,\r\n  required,\r\n  autoComplete,\r\n  value,\r\n  onChange,\r\n}) => (\r\n  <div className=\"FormRow\">\r\n    <label htmlFor={id} className=\"FormRowLabel\">\r\n      {label}\r\n    </label>\r\n    <input\r\n      className=\"FormRowInput\"\r\n      id={id}\r\n      type={type}\r\n      placeholder={placeholder}\r\n      required={required}\r\n      autoComplete={autoComplete}\r\n      value={value}\r\n      onChange={onChange}\r\n    />\r\n  </div>\r\n)\r\n\r\nconst SubmitButton = ({processing, error, children, disabled}) => (\r\n  <button\r\n    className={`SubmitButton ${error ? 'SubmitButton--error' : ''}`}\r\n    type=\"submit\"\r\n    disabled={processing || disabled}\r\n  >\r\n    {processing ? 'Processing...' : children}\r\n  </button>\r\n)\r\n\r\nconst ErrorMessage = ({children}) => (\r\n  <div className=\"ErrorMessage\" role=\"alert\">\r\n    <svg width=\"16\" height=\"16\" viewBox=\"0 0 17 17\">\r\n      <path\r\n        fill=\"#FFF\"\r\n        d=\"M8.5,17 C3.80557963,17 0,13.1944204 0,8.5 C0,3.80557963 3.80557963,0 8.5,0 C13.1944204,0 17,3.80557963 17,8.5 C17,13.1944204 13.1944204,17 8.5,17 Z\"\r\n      />\r\n      <path\r\n        fill=\"#6772e5\"\r\n        d=\"M8.5,7.29791847 L6.12604076,4.92395924 C5.79409512,4.59201359 5.25590488,4.59201359 4.92395924,4.92395924 C4.59201359,5.25590488 4.59201359,5.79409512 4.92395924,6.12604076 L7.29791847,8.5 L4.92395924,10.8739592 C4.59201359,11.2059049 4.59201359,11.7440951 4.92395924,12.0760408 C5.25590488,12.4079864 5.79409512,12.4079864 6.12604076,12.0760408 L8.5,9.70208153 L10.8739592,12.0760408 C11.2059049,12.4079864 11.7440951,12.4079864 12.0760408,12.0760408 C12.4079864,11.7440951 12.4079864,11.2059049 12.0760408,10.8739592 L9.70208153,8.5 L12.0760408,6.12604076 C12.4079864,5.79409512 12.4079864,5.25590488 12.0760408,4.92395924 C11.7440951,4.59201359 11.2059049,4.59201359 10.8739592,4.92395924 L8.5,7.29791847 L8.5,7.29791847 Z\"\r\n      />\r\n    </svg>\r\n    {children}\r\n  </div>\r\n)\r\n\r\nexport default function StripeCardEntryExample () {\r\n\r\n  const stripe = useStripe()\r\n  const elements = useElements()\r\n  const fetchedUser = useFetchedUserData() // my hook \r\n  const { isLoading, isAuthenticated } = useAuth0()\r\n  const [error, setError] = useState(null)\r\n  const [cardComplete, setCardComplete] = useState(false)\r\n  const [processing, setProcessing] = useState(false)\r\n  const [paymentMethod, setPaymentMethod] = useState(null)\r\n  const [billingDetails, setBillingDetails] = useState({\r\n    email: '',\r\n    phone: '',\r\n    name: '',\r\n  })\r\n  const [keepBillingDetails, setKeepBillingDetails] = useState(true)\r\n  const history = useHistory()\r\n  const [pmtMethodResult, setPmtMethodResult] = useState(null)\r\n  const jwt = useAuthToken()\r\n\r\n  // React.useEffect(() => {\r\n\r\n  //   console.log('useEffect pmtMeth firing', pmtMethodResult)\r\n\r\n  //   if (pmtMethodResult && fetchedUser && jwt) {\r\n  //     // once payment method is attached, get result and post to auth0 user\r\n  //     fetch(`${gymApiUrl}${fetchedUser.user_id}`, {\r\n  //       method: 'PATCH',\r\n  //       body: JSON.stringify({\r\n  //         user_metadata: {\r\n  //           stripe: {\r\n  //             paymentMethods: {\r\n  //               pmtMethodResult\r\n  //             }\r\n  //           }\r\n  //         }\r\n  //       }),\r\n  //       headers: {\r\n  //           'content-type': 'application/json',\r\n  //           'authorization': `Bearer ${jwt.access_token}`\r\n  //       }\r\n  //     })\r\n  //     .then(response => response.json())\r\n  //     .then(data => {\r\n  //       console.log('saved payment data to auth0 user', data)\r\n  //     })\r\n  //     .catch(err => console.log(err))\r\n  //   }\r\n  // }, [pmtMethodResult])\r\n\r\n  const patchPaymentMethodData = (data) => {\r\n    let { user_metadata: { stripe } } = fetchedUser\r\n    let paymentMethods\r\n    if (stripe.paymentMethods) {\r\n      paymentMethods = stripe.paymentMethods\r\n    } else {\r\n      paymentMethods = {}\r\n    }\r\n    let new_metadata = {\r\n      stripe: {\r\n        ...stripe,\r\n        paymentMethods: {\r\n          ...paymentMethods,\r\n          [data.id]: data\r\n        }\r\n      }\r\n    }\r\n    fetch(`${gymApiUrl}${fetchedUser.user_id}`, {\r\n      method: 'PATCH',\r\n      body: JSON.stringify({\r\n        user_metadata: new_metadata\r\n      }),\r\n      headers: {\r\n          'content-type': 'application/json',\r\n          'authorization': `Bearer ${jwt.access_token}`\r\n      }\r\n    })\r\n    .then(response => response.json())\r\n    .then(data => {\r\n      console.log('saved payment data to auth0 user', data)\r\n    })\r\n    .catch(err => console.log(err))\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    if (paymentMethod) {\r\n      history.push('/?paymentMethodSetup=complete')\r\n    }\r\n  }, [paymentMethod])\r\n\r\n  React.useEffect(() => {\r\n    if (fetchedUser) {\r\n        setBillingDetails({\r\n            email: fetchedUser.email,\r\n            phone: fetchedUser.user_metadata?.mobile ? fetchedUser.user_metadata.mobile : '',\r\n            name: fetchedUser?.given_name && fetchedUser?.family_name ? fetchedUser.given_name + ' ' + fetchedUser.family_name : 'user'\r\n        })\r\n    }\r\n  }, [fetchedUser])\r\n\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault()\r\n    if (fetchedUser?.user_metadata?.stripe?.customer) {\r\n        // console.log( fetchedUser.user_metadata.stripe.customer.id )\r\n        \r\n        if (!stripe || !elements) {\r\n            // Stripe.js has not loaded yet. Make sure to disable\r\n            // form submission until Stripe.js has loaded.\r\n            return\r\n        }\r\n    \r\n        if (error) {\r\n            elements.getElement('card').focus()\r\n            return\r\n        }\r\n    \r\n        if (cardComplete) {\r\n            setProcessing(true)\r\n        }\r\n    \r\n        const payload = await stripe.createPaymentMethod({\r\n            type: 'card',\r\n            card: elements.getElement(CardElement),\r\n            billing_details: billingDetails,\r\n        })\r\n    \r\n        setProcessing(false)\r\n    \r\n        if (payload.error) {\r\n            setError(payload.error)\r\n        } else {\r\n            setPaymentMethod(payload.paymentMethod)\r\n        }\r\n\r\n        // my backend route \r\n        if (!error) {\r\n            console.log(payload.paymentMethod)\r\n            fetch('/attach-payment-method', {\r\n                method: 'POST',\r\n                body: JSON.stringify({\r\n                    paymentMethod: payload.paymentMethod,\r\n                    customer: fetchedUser.user_metadata.stripe.customer\r\n                }),\r\n                headers: { 'Content-type': 'application/json' }\r\n            })\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                console.log(data)\r\n                let { paymentMethodAttachResult } = data\r\n                // setPmtMethodResult(\r\n                //   paymentMethodAttachResult\r\n                // )\r\n                patchPaymentMethodData( paymentMethodAttachResult )\r\n            })\r\n            .catch(err => {\r\n                console.log(err)\r\n            })\r\n\r\n        } else {\r\n            console.log(error)\r\n        }\r\n\r\n    } else {\r\n        console.log('stripe customer id data not found in auth0 user object')\r\n    }\r\n  }\r\n\r\n  return (\r\n      paymentMethod ? (\r\n        <div className=\"Result\">\r\n          <div className=\"ResultTitle\" role=\"alert\">\r\n          </div>\r\n        </div>\r\n      ) : (\r\n      <>\r\n        <>\r\n            {\r\n                fetchedUser && fetchedUser.family_name && fetchedUser.given_name && fetchedUser?.user_metadata?.mobile ?\r\n                <>\r\n                    <>\r\n                        <br />\r\n                        {\r\n                            keepBillingDetails === true ?\r\n                            <>\r\n                                <div>Keeping current user billing info:</div>\r\n                                <br />\r\n                                <button\r\n                                onClick={() => setKeepBillingDetails(false)}\r\n                                >\r\n                                    Change Billing Info\r\n                                </button>\r\n                                <br />\r\n                                <br />\r\n                                {\r\n                                    fetchedUser ?\r\n                                    <>\r\n                                        <div>{fetchedUser?.given_name && fetchedUser?.family_name ? fetchedUser.given_name + ' ' + fetchedUser.family_name : 'no name set in profile'}</div>\r\n                                        <div>{fetchedUser?.email ? fetchedUser.email : ''}</div>\r\n                                        <div>{fetchedUser?.user_metadata?.mobile ? fetchedUser.user_metadata.mobile : 'no mobile number set in profile'}</div>\r\n                                    </>\r\n                                    : <></>\r\n                                }\r\n                            </>\r\n                            :\r\n                            <>\r\n                                <div></div>\r\n                                <button\r\n                                onClick={() => {\r\n                                    if (fetchedUser) {\r\n                                        setBillingDetails({\r\n                                            email: fetchedUser.email,\r\n                                            phone: fetchedUser.user_metadata?.mobile ? fetchedUser.user_metadata.mobile : '',\r\n                                            name: fetchedUser?.given_name && fetchedUser?.family_name ? fetchedUser.given_name + ' ' + fetchedUser.family_name : 'user'\r\n                                        })\r\n                                        setKeepBillingDetails(true)\r\n                                    }\r\n                                }}\r\n                                >\r\n                                    Cancel\r\n                                </button>\r\n                            </>\r\n                        }\r\n                    </>\r\n                    <div id='form-container'>\r\n                        <form className=\"Form\" onSubmit={handleSubmit}>\r\n                            {\r\n                                keepBillingDetails === false ?\r\n                                <fieldset className=\"FormGroup\">\r\n                                    <Field\r\n                                    label=\"Name\"\r\n                                    id=\"name\"\r\n                                    type=\"text\"\r\n                                    placeholder=\"Jane Doe\"\r\n                                    required\r\n                                    autoComplete=\"name\"\r\n                                    value={billingDetails.name}\r\n                                    onChange={(e) => {\r\n                                        setBillingDetails({...billingDetails, name: e.target.value});\r\n                                    }}\r\n                                    />\r\n                                    <Field\r\n                                    label=\"Email\"\r\n                                    id=\"email\"\r\n                                    type=\"email\"\r\n                                    placeholder=\"janedoe@gmail.com\"\r\n                                    required\r\n                                    autoComplete=\"email\"\r\n                                    value={billingDetails.email}\r\n                                    onChange={(e) => {\r\n                                        setBillingDetails({...billingDetails, email: e.target.value});\r\n                                    }}\r\n                                    />\r\n                                    <Field\r\n                                    label=\"Phone\"\r\n                                    id=\"phone\"\r\n                                    type=\"tel\"\r\n                                    placeholder=\"(941) 555-0123\"\r\n                                    required\r\n                                    autoComplete=\"tel\"\r\n                                    value={billingDetails.phone}\r\n                                    onChange={(e) => {\r\n                                        setBillingDetails({...billingDetails, phone: e.target.value});\r\n                                    }}\r\n                                    />\r\n                                </fieldset>\r\n                                : <></>\r\n                            }\r\n                        <fieldset className=\"FormGroup\">\r\n                            <CardField\r\n                            onChange={(e) => {\r\n                                setError(e.error);\r\n                                setCardComplete(e.complete);\r\n                            }}\r\n                            />\r\n                        </fieldset>\r\n                        {error && <ErrorMessage>{error.message}</ErrorMessage>}\r\n                        <div\r\n                        style={{\r\n                          width: '300px',\r\n                          position: 'absolute',\r\n                          left: 0, right: 0,\r\n                          margin: 'auto'\r\n                        }}\r\n                        >\r\n                          <SubmitButton processing={processing} error={error} disabled={!stripe}>\r\n                              Create Payment Method\r\n                          </SubmitButton>\r\n                        </div>\r\n                        </form>\r\n                    </div>\r\n                </>\r\n                :\r\n                <>  \r\n                    {\r\n                        fetchedUser && isAuthenticated === true ?\r\n                            isLoading ?\r\n                            null\r\n                            :\r\n                            <>\r\n                                <br />\r\n                                <div>Please update your profile info with your full name and mobile phone before adding a payment method</div>\r\n                            </>\r\n                        : null\r\n                    }\r\n                </>\r\n            }\r\n        </>\r\n    </>\r\n    )\r\n  )\r\n}\r\n\r\nconst ELEMENTS_OPTIONS = {\r\n  fonts: [\r\n    {\r\n      cssSrc: 'https://fonts.googleapis.com/css?family=Roboto',\r\n    },\r\n  ],\r\n};\r\n\r\n// export default StripeCardEntryExample\r\n\r\n// Make sure to call `loadStripe` outside of a component’s render to avoid\r\n// recreating the `Stripe` object on every render.\r\n// const stripePromise = loadStripe('pk_test_6pRNASCoBOKtIshFeQd4XMUh');\r\n\r\n// const App = () => {\r\n//   return (\r\n//     <div className=\"AppWrapper\">\r\n//       <Elements stripe={stripePromise} options={ELEMENTS_OPTIONS}>\r\n//         <CheckoutForm />\r\n//       </Elements>\r\n//     </div>\r\n//   );\r\n// };\r\n\r\n// export default App;","C:\\Users\\EP\\Documents\\stripe-react\\src\\components\\ChoosePaymentMethod.js",["146","147"],"import React from 'react'\r\nimport useFetchedUserData from '../hooks/useFetchedUserData'\r\nimport visaLogo from '../images/visa.png'\r\nimport mastercardLogo from '../images/mastercard.png'\r\n\r\nexport default function ChoosePaymentMethod ({ onPaymentMethodChosen }) {\r\n\r\n    const fetchedUser = useFetchedUserData()\r\n    const [paymentMethods, setPaymentMethods] = React.useState(null)\r\n    const [chosenPmtMethod, setChosenPmtMethod] = React.useState(null)\r\n\r\n    React.useEffect(() => {\r\n        if (fetchedUser && fetchedUser?.user_metadata?.stripe?.paymentMethods) {\r\n            let { user_metadata: { stripe: { paymentMethods: pmts } } } = fetchedUser\r\n            setPaymentMethods(\r\n                Object.keys(pmts).map(key => pmts[key])\r\n            )\r\n        }\r\n    }, [fetchedUser])\r\n\r\n    React.useEffect(() => {\r\n        console.log(paymentMethods)\r\n    }, [paymentMethods])\r\n\r\n    React.useEffect(() => {\r\n        console.log(chosenPmtMethod)\r\n        if (onPaymentMethodChosen) {\r\n            onPaymentMethodChosen( chosenPmtMethod )\r\n        }\r\n    }, [chosenPmtMethod])\r\n\r\n    return <>\r\n        {\r\n            paymentMethods ?\r\n            <>\r\n                <br />\r\n                {\r\n                    chosenPmtMethod ?\r\n                    <img\r\n                        src={\r\n                        chosenPmtMethod.card.brand === 'visa' ? visaLogo\r\n                        :\r\n                            chosenPmtMethod.card.brand === 'mastercard' || chosenPmtMethod.card.brand === 'mc' ? mastercardLogo\r\n                            :\r\n                                null\r\n                        }\r\n                    />\r\n                    : null\r\n                }\r\n                <br />\r\n                {\r\n                    chosenPmtMethod ?\r\n                    <>\r\n                        <div>\r\n                            Selected Payment Method: &nbsp;\r\n                            <span>{ `${ chosenPmtMethod.card.brand }   *${ chosenPmtMethod.card.last4 }` }</span>\r\n                        </div>\r\n                        <div style={{ fontSize: '11px', color: '#ccc' }}>\r\n                            Payment Method ID: { chosenPmtMethod.id }\r\n                        </div>\r\n                    </>\r\n                    : <div>no payment method selected</div>\r\n                }\r\n                <br />\r\n                <select\r\n                    style={{ width: '200px' }}\r\n                    onChange={(event) => {\r\n                        console.log(event.target.value)\r\n                        setChosenPmtMethod(event.target.value !== 'none' ? JSON.parse(event.target.value) : null)\r\n                    }}\r\n                >\r\n                    <option value={'none'}>Choose payment method</option>\r\n                    {\r\n                        paymentMethods.map(pmtMethod => {\r\n                            return (\r\n                                <option value={ JSON.stringify(pmtMethod) }>\r\n                                    { pmtMethod.card.brand }   *{ pmtMethod.card.last4 }\r\n                                </option>\r\n                            )\r\n                        })\r\n                    }\r\n                </select>\r\n            </>\r\n            :\r\n            <>\r\n                <br />\r\n                <div>No payment methods have been set up</div>\r\n            </>\r\n        }\r\n    </>\r\n\r\n}",{"ruleId":"148","replacedBy":"149"},{"ruleId":"150","replacedBy":"151"},{"ruleId":"152","severity":1,"message":"153","line":13,"column":8,"nodeType":"154","messageId":"155","endLine":13,"endColumn":27},{"ruleId":"156","severity":1,"message":"157","line":1,"column":1,"nodeType":"158","endLine":122,"endColumn":3},{"ruleId":"148","replacedBy":"159"},{"ruleId":"150","replacedBy":"160"},{"ruleId":"156","severity":1,"message":"157","line":1,"column":1,"nodeType":"158","endLine":3,"endColumn":3},{"ruleId":"152","severity":1,"message":"161","line":87,"column":21,"nodeType":"154","messageId":"155","endLine":87,"endColumn":25},{"ruleId":"162","severity":1,"message":"163","line":104,"column":8,"nodeType":"164","endLine":104,"endColumn":27,"suggestions":"165"},{"ruleId":"156","severity":1,"message":"157","line":34,"column":1,"nodeType":"158","endLine":62,"endColumn":2},{"ruleId":"166","severity":1,"message":"167","line":56,"column":13,"nodeType":"168","endLine":59,"endColumn":15},{"ruleId":"148","replacedBy":"169"},{"ruleId":"150","replacedBy":"170"},{"ruleId":"152","severity":1,"message":"171","line":2,"column":19,"nodeType":"154","messageId":"155","endLine":2,"endColumn":25},{"ruleId":"152","severity":1,"message":"172","line":14,"column":7,"nodeType":"154","messageId":"155","endLine":14,"endColumn":20},{"ruleId":"173","severity":1,"message":"174","line":98,"column":36,"nodeType":"175","messageId":"176","endLine":98,"endColumn":38},{"ruleId":"173","severity":1,"message":"177","line":126,"column":47,"nodeType":"175","messageId":"176","endLine":126,"endColumn":49},{"ruleId":"173","severity":1,"message":"177","line":186,"column":19,"nodeType":"175","messageId":"176","endLine":186,"endColumn":21},{"ruleId":"162","severity":1,"message":"178","line":36,"column":8,"nodeType":"164","endLine":36,"endColumn":25,"suggestions":"179"},{"ruleId":"180","severity":1,"message":"181","line":98,"column":29,"nodeType":"182","messageId":"183","endLine":98,"endColumn":31},{"ruleId":"180","severity":1,"message":"181","line":99,"column":78,"nodeType":"182","messageId":"183","endLine":99,"endColumn":80},{"ruleId":"162","severity":1,"message":"184","line":61,"column":6,"nodeType":"164","endLine":61,"endColumn":16,"suggestions":"185"},{"ruleId":"186","severity":1,"message":"187","line":68,"column":13,"nodeType":"168","endLine":68,"endColumn":63},{"ruleId":"156","severity":1,"message":"157","line":4,"column":1,"nodeType":"158","endLine":11,"endColumn":2},{"ruleId":"152","severity":1,"message":"188","line":28,"column":17,"nodeType":"154","messageId":"155","endLine":28,"endColumn":20},{"ruleId":"162","severity":1,"message":"189","line":54,"column":8,"nodeType":"164","endLine":54,"endColumn":25,"suggestions":"190"},{"ruleId":"148","replacedBy":"191"},{"ruleId":"150","replacedBy":"192"},{"ruleId":"162","severity":1,"message":"193","line":55,"column":6,"nodeType":"164","endLine":55,"endColumn":27,"suggestions":"194"},{"ruleId":"152","severity":1,"message":"195","line":2,"column":23,"nodeType":"154","messageId":"155","endLine":2,"endColumn":31},{"ruleId":"152","severity":1,"message":"196","line":7,"column":10,"nodeType":"154","messageId":"155","endLine":7,"endColumn":13},{"ruleId":"152","severity":1,"message":"197","line":111,"column":10,"nodeType":"154","messageId":"155","endLine":111,"endColumn":25},{"ruleId":"152","severity":1,"message":"198","line":111,"column":27,"nodeType":"154","messageId":"155","endLine":111,"endColumn":45},{"ruleId":"162","severity":1,"message":"199","line":182,"column":6,"nodeType":"164","endLine":182,"endColumn":21,"suggestions":"200"},{"ruleId":"152","severity":1,"message":"201","line":406,"column":7,"nodeType":"154","messageId":"155","endLine":406,"endColumn":23},{"ruleId":"162","severity":1,"message":"202","line":30,"column":8,"nodeType":"164","endLine":30,"endColumn":25,"suggestions":"203"},{"ruleId":"166","severity":1,"message":"167","line":39,"column":21,"nodeType":"168","endLine":47,"endColumn":23},"no-native-reassign",["204"],"no-negated-in-lhs",["205"],"no-unused-vars","'ChoosePaymentMethod' is defined but never used.","Identifier","unusedVar","import/no-anonymous-default-export","Assign arrow function to a variable before exporting as module default","ExportDefaultDeclaration",["204"],["205"],"'data' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook React.useEffect has missing dependencies: 'history' and 'location.search'. Either include them or remove the dependency array.","ArrayExpression",["206"],"jsx-a11y/alt-text","img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","JSXOpeningElement",["204"],["205"],"'reject' is defined but never used.","'stripePromise' is assigned a value but never used.","array-callback-return","Array.prototype.filter() expects a value to be returned at the end of arrow function.","ArrowFunctionExpression","expectedAtEnd","Array.prototype.map() expects a value to be returned at the end of arrow function.","React Hook React.useEffect has a missing dependency: 'jwt'. Either include it or remove the dependency array.",["207"],"no-mixed-operators","Unexpected mix of '||' and '&&'.","LogicalExpression","unexpectedMixedOperator","React Hook React.useEffect has missing dependencies: 'delayBeforeLeave', 'doAction', 'history', 'queryTerm', 'redirectPath', and 'timeout'. Either include them or remove the dependency array. If 'doAction' changes too often, find the parent component that defines it and wrap that definition in useCallback.",["208"],"react/jsx-pascal-case","Imported JSX component ModalDiv_SlideIn must be in PascalCase or SCREAMING_SNAKE_CASE","'sec' is assigned a value but never used.","React Hook React.useEffect has a missing dependency: 'setTOut'. Either include it or remove the dependency array.",["209"],["204"],["205"],"React Hook React.useEffect has a missing dependency: 'user.sub'. Either include it or remove the dependency array.",["210"],"'Elements' is defined but never used.","'set' is defined but never used.","'pmtMethodResult' is assigned a value but never used.","'setPmtMethodResult' is assigned a value but never used.","React Hook React.useEffect has a missing dependency: 'history'. Either include it or remove the dependency array.",["211"],"'ELEMENTS_OPTIONS' is assigned a value but never used.","React Hook React.useEffect has a missing dependency: 'onPaymentMethodChosen'. Either include it or remove the dependency array. If 'onPaymentMethodChosen' changes too often, find the parent component that defines it and wrap that definition in useCallback.",["212"],"no-global-assign","no-unsafe-negation",{"desc":"213","fix":"214"},{"desc":"215","fix":"216"},{"desc":"217","fix":"218"},{"desc":"219","fix":"220"},{"desc":"221","fix":"222"},{"desc":"223","fix":"224"},{"desc":"225","fix":"226"},"Update the dependencies array to be: [history, isAuthenticated, location.search]",{"range":"227","text":"228"},"Update the dependencies array to be: [isAuthenticated, jwt]",{"range":"229","text":"230"},"Update the dependencies array to be: [delayBeforeLeave, doAction, history, location, queryTerm, redirectPath, timeout]",{"range":"231","text":"232"},"Update the dependencies array to be: [isAuthenticated, setTOut]",{"range":"233","text":"234"},"Update the dependencies array to be: [stripeCustomer, jwt, user.sub]",{"range":"235","text":"236"},"Update the dependencies array to be: [history, paymentMethod]",{"range":"237","text":"238"},"Update the dependencies array to be: [chosenPmtMethod, onPaymentMethodChosen]",{"range":"239","text":"240"},[3736,3755],"[history, isAuthenticated, location.search]",[1431,1448],"[isAuthenticated, jwt]",[1921,1931],"[delayBeforeLeave, doAction, history, location, queryTerm, redirectPath, timeout]",[2113,2130],"[isAuthenticated, setTOut]",[1593,1614],"[stripeCustomer, jwt, user.sub]",[5731,5746],"[history, paymentMethod]",[1065,1082],"[chosenPmtMethod, onPaymentMethodChosen]"]